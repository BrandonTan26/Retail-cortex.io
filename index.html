<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Retail-Cortex.io — Service Modules</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Orbitron:wght@600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#070A16;
      --bg2:#0B1026;
      --card:rgba(10,14,32,.76);
      --card2:rgba(12,18,42,.82);
      --stroke:rgba(148,163,184,.22);
      --stroke2:rgba(148,163,184,.34);
      --text:#E8EEFF;
      --muted:rgba(232,238,255,.70);
      --muted2:rgba(232,238,255,.55);
      --brandA:#22d3ee;
      --brandB:#7c3aed;
      --brandC:#4c1d95;
      --good:#22c55e;
      --warn:#f59e0b;
      --bad:#fb7185;

      --r16:16px;
      --r18:18px;
      --r20:20px;
      --shadow:0 18px 55px rgba(0,0,0,.55);
      --shadow2:0 26px 75px rgba(0,0,0,.70);

      --gutter:16px;
      --max:1100px;

      --floatingSize:54px;
    }

    html[data-theme="light"]{
      --bg:#EEF2FF;
      --bg2:#F8FAFF;
      --card:rgba(255,255,255,.86);
      --card2:rgba(255,255,255,.96);
      --stroke:rgba(2,6,23,.10);
      --stroke2:rgba(2,6,23,.16);
      --text:#0B1026;
      --muted:rgba(11,16,38,.72);
      --muted2:rgba(11,16,38,.58);
      --shadow:0 14px 38px rgba(2,6,23,.12);
      --shadow2:0 18px 46px rgba(2,6,23,.16);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1100px 650px at 20% 0%, rgba(124,58,237,.35), transparent 55%),
        radial-gradient(900px 520px at 85% 15%, rgba(34,211,238,.26), transparent 58%),
        radial-gradient(900px 620px at 55% 110%, rgba(76,29,149,.32), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      overflow-x:hidden;
      padding-bottom: 120px;
    }

    .bg-grid{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:.16;
      background-image:
        linear-gradient(to right, rgba(129,140,248,.22) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(129,140,248,.22) 1px, transparent 1px);
      background-size: 52px 52px;
      mask-image: radial-gradient(circle at 50% 10%, rgba(0,0,0,1), rgba(0,0,0,.2) 55%, rgba(0,0,0,0) 85%);
      z-index:0;
    }

    .container{
      width:100%;
      max-width:var(--max);
      margin:0 auto;
      padding-left:var(--gutter);
      padding-right:var(--gutter);
      position:relative;
      z-index:1;
    }

    header{
      position:sticky; top:0;
      z-index:30;
      background:rgba(7,10,22,.55);
      backdrop-filter: blur(14px) saturate(1.2);
      border-bottom:1px solid var(--stroke);
    }
    html[data-theme="light"] header{ background:rgba(248,250,255,.72); }

    .nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 0;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .brand img{
      width:42px;height:42px;
      border-radius:14px;
      object-fit:contain; /* FIX: logo full */
      flex:0 0 auto;
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.06);
      padding:6px; /* ruang biar ga mepet */
    }
    .brand-text{min-width:0; line-height:1.05}
    .brand-title{
      font-family:Orbitron,Inter,sans-serif;
      font-weight:800;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:1rem;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      background: linear-gradient(90deg, var(--brandB), var(--brandA));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .brand-sub{
      margin-top:4px;
      font-size:.72rem;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted2);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }

    .menuBtn{
      width:46px;height:46px;
      border-radius:16px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--text);
      display:flex;align-items:center;justify-content:center;
      box-shadow: var(--shadow);
      cursor:pointer;
    }
    html[data-theme="light"] .menuBtn{background:rgba(2,6,23,.04)}
    .menuBtn:active{transform:translateY(1px)}

    .hero{ padding:22px 0 12px; }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--muted);
      font-weight:600;
      font-size:.88rem;
    }
    .pill .dot{
      width:10px;height:10px;border-radius:999px;
      background:linear-gradient(135deg,var(--brandB),var(--brandA));
      box-shadow: 0 0 0 6px rgba(34,211,238,.12);
    }

    .heroGrid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:18px;
      align-items:start;
      margin-top:14px;
    }
    @media (max-width:900px){
      .heroGrid{grid-template-columns:1fr; gap:14px;}
    }

    .heroTitle{
      margin:10px 0 10px;
      font-family:Orbitron,Inter,sans-serif;
      font-weight:800;
      letter-spacing:.06em;
      text-transform:uppercase;
      line-height:1.06;
      font-size:2.35rem;
      text-wrap: balance;
      overflow-wrap:anywhere;
    }
    @media (max-width:480px){
      .heroTitle{font-size:2.05rem; letter-spacing:.05em;}
    }
    .heroTitle .accent{
      background:linear-gradient(90deg,var(--brandB),var(--brandA));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .heroDesc{
      margin:0;
      color:var(--muted);
      font-size:1rem;
      line-height:1.7;
      max-width: 56ch;
    }

    .heroCards{ display:grid; gap:10px; }
    .miniCard{
      border:1px solid var(--stroke);
      background:var(--card);
      border-radius:var(--r20);
      box-shadow: var(--shadow);
      padding:14px;
    }
    .miniCard h4{ margin:0 0 6px; font-size:.98rem; font-weight:800; letter-spacing:.02em; }
    .miniCard p{ margin:0; color:var(--muted); font-size:.92rem; line-height:1.6; }

    /* Hero Brand Mark (logo besar full, profesional) */
    .brandMark{
      border:1px solid var(--stroke);
      background: radial-gradient(800px 220px at 15% 0%, rgba(124,58,237,.20), transparent 55%), var(--card);
      border-radius: 26px;
      box-shadow: var(--shadow2);
      padding: 18px;
      display:grid;
      gap:12px;
      align-items:center;
      text-align:center;
    }
    .brandMark .logoWrap{
      width:100%;
      border-radius: 22px;
      border:1px solid var(--stroke2);
      background: rgba(255,255,255,.06);
      box-shadow: 0 16px 44px rgba(0,0,0,.35);
      padding: 18px;
    }
    html[data-theme="light"] .brandMark .logoWrap{ background: rgba(2,6,23,.03); }
    .brandMark img{
      width:100%;
      max-width: 260px;
      height:auto;
      display:block;
      margin: 0 auto;
      object-fit:contain; /* FIX: full */
      filter: drop-shadow(0 16px 32px rgba(0,0,0,.35));
    }
    .brandMark .cap{
      font-family:Orbitron,Inter,sans-serif;
      font-weight:800;
      letter-spacing:.10em;
      text-transform:uppercase;
      font-size:.92rem;
      color:var(--muted2);
    }

    .section{ padding:18px 0 10px; }
    .section h2{ margin:0 0 6px; font-size:1.35rem; font-weight:900; letter-spacing:.02em; }
    .section .sub{ margin:0 0 14px; color:var(--muted); line-height:1.65; }

    .grid{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width:980px){ .grid{grid-template-columns:repeat(2,1fr);} }
    @media (max-width:560px){ .grid{grid-template-columns:1fr;} }

    .card{
      border:1px solid var(--stroke);
      border-radius:var(--r20);
      background: radial-gradient(900px 220px at 10% 0%, rgba(34,211,238,.14), transparent 55%), var(--card);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    html[data-theme="light"] .card{
      background: radial-gradient(900px 220px at 10% 0%, rgba(124,58,237,.10), transparent 55%), var(--card);
    }

    .cardTop{
      padding:14px 14px 10px;
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
    }
    .badge{
      display:inline-flex;align-items:center;gap:8px;
      padding:8px 12px;
      border-radius:999px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--muted);
      font-weight:800;
      font-size:.78rem;
      letter-spacing:.10em;
      text-transform:uppercase;
    }
    .iconBox{
      width:44px;height:44px;border-radius:16px;
      display:flex;align-items:center;justify-content:center;
      border:1px solid var(--stroke2);
      background:linear-gradient(135deg, rgba(124,58,237,.20), rgba(34,211,238,.12));
      box-shadow: 0 14px 36px rgba(0,0,0,.25);
      flex:0 0 auto;
    }
    .iconBox svg{width:22px;height:22px;opacity:.92}

    .cardBody{ padding:0 14px 14px; }
    .cardTitle{ margin:2px 0 6px; font-size:1.08rem; font-weight:900; letter-spacing:.01em; }
    .cardDesc{ margin:0 0 12px; color:var(--muted); line-height:1.65; font-size:.94rem; }

    .btn{
      appearance:none;
      border:none;
      cursor:pointer;
      border-radius:16px;
      padding:12px 14px;
      font-weight:900;
      font-size:.95rem;
      letter-spacing:.01em;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      transition: transform .12s ease, opacity .12s ease;
      user-select:none;
    }
    .btn:active{transform:translateY(1px)}
    .btnPrimary{
      color:#061026;
      background:linear-gradient(90deg,var(--brandB),var(--brandA));
      box-shadow: var(--shadow);
    }
    .btnGhost{
      color:var(--text);
      background:rgba(255,255,255,.06);
      border:1px solid var(--stroke2);
    }
    html[data-theme="light"] .btnGhost{background:rgba(2,6,23,.04)}
    .btnFull{width:100%}

    /* price not shown in cards (kunci) */
    .hintLine{
      margin-top:10px;
      padding-top:10px;
      border-top:1px solid var(--stroke);
      color:var(--muted2);
      font-size:.9rem;
      line-height:1.55;
      font-weight:700;
    }

    .testiWrap{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width:900px){.testiWrap{grid-template-columns:1fr;}}
    .testi{
      border:1px solid var(--stroke);
      background:var(--card);
      border-radius:var(--r20);
      padding:14px;
      box-shadow: var(--shadow);
    }
    .stars{letter-spacing:2px; color:#fbbf24; font-size:.95rem}
    .testi p{margin:8px 0 0; color:var(--muted); line-height:1.65}
    .testi .name{margin-top:10px; font-weight:900}
    .testi .meta{color:var(--muted2); font-size:.9rem}

    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      display:none;
      z-index:50;
      padding: 12px;
    }
    .overlay.open{display:flex; align-items:center; justify-content:center;}
    .modal{
      width:100%;
      max-width: 720px;
      border-radius: 22px;
      border:1px solid var(--stroke2);
      background: var(--card2);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .modalHeader{
      padding:14px 14px;
      background: linear-gradient(90deg, rgba(124,58,237,.35), rgba(34,211,238,.22));
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .modalHeader h3{
      margin:0;
      font-family:Orbitron,Inter,sans-serif;
      font-weight:800;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:1.05rem;
    }
    .closeBtn{
      width:42px;height:42px;border-radius:16px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.08);
      color:var(--text);
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    html[data-theme="light"] .closeBtn{background:rgba(2,6,23,.04)}
    .modalBody{padding:14px}
    .modalFooter{
      padding:14px;
      border-top:1px solid var(--stroke);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .field{ display:grid; gap:8px; margin-bottom:12px; }
    .label{ font-weight:800; color:var(--muted); font-size:.9rem; }
    input, select, textarea{
      width:100%;
      padding:12px 12px;
      border-radius: 16px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--text);
      outline:none;
      font-weight:700;
      font-size:.98rem;
    }
    html[data-theme="light"] input, html[data-theme="light"] select, html[data-theme="light"] textarea{
      background:rgba(2,6,23,.04);
    }
    textarea{min-height:86px; resize:vertical; font-weight:600}
    .help{ margin:6px 0 0; color:var(--muted2); font-size:.9rem; line-height:1.55; }

    .inline2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    @media (max-width:560px){.inline2{grid-template-columns:1fr;}}

    .pdfRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media (max-width:560px){.pdfRow{grid-template-columns:1fr;}}

    .floating{
      position:fixed;
      bottom:16px;
      z-index:40;
      width:var(--floatingSize);
      height:var(--floatingSize);
      border-radius: 999px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.08);
      box-shadow: var(--shadow2);
      color:var(--text);
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      user-select:none;
    }
    html[data-theme="light"] .floating{background:rgba(2,6,23,.04)}
    .floating:active{transform:translateY(1px)}
    .floatingLeft{left:16px}
    .floatingRight{right:16px}

    .count{
      position:absolute;
      top:-6px; right:-6px;
      min-width:22px;height:22px;
      border-radius:999px;
      background: var(--good);
      color:#06200f;
      font-weight:1000;
      font-size:.78rem;
      display:flex;align-items:center;justify-content:center;
      border:2px solid rgba(0,0,0,.20);
    }

    .drawerOverlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      display:none;
      z-index:60;
      padding: 12px;
    }
    .drawerOverlay.open{display:block;}
    .drawer{
      position:absolute;
      right:12px; bottom:12px;
      width:min(520px, calc(100% - 24px));
      border-radius:22px;
      border:1px solid var(--stroke2);
      background: var(--card2);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .drawerHeader{
      padding:14px;
      background: linear-gradient(90deg, rgba(124,58,237,.35), rgba(34,211,238,.22));
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .drawerHeader h3{
      margin:0;
      font-family:Orbitron,Inter,sans-serif;
      font-weight:800;
      letter-spacing:.06em;
      text-transform:uppercase;
      font-size:1.02rem;
    }
    .drawerBody{padding:14px; max-height: 56vh; overflow:auto;}
    .drawerFooter{
      padding:14px;
      border-top:1px solid var(--stroke);
      display:grid;
      gap:10px;
    }
    .item{
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.05);
      border-radius:18px;
      padding:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:flex-start;
      margin-bottom:10px;
    }
    html[data-theme="light"] .item{background:rgba(2,6,23,.03)}
    .item .t{font-weight:900}
    .item .m{color:var(--muted); font-size:.9rem; margin-top:4px; line-height:1.55}
    .item .right{display:flex; flex-direction:column; gap:8px; align-items:flex-end}
    .qty{
      display:flex; align-items:center; gap:8px;
      border:1px solid var(--stroke2);
      border-radius:999px;
      padding:6px 8px;
      background:rgba(255,255,255,.06);
    }
    .qbtn{
      width:30px;height:30px;border-radius:999px;
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.08);
      color:var(--text);
      cursor:pointer;
      font-weight:900;
    }
    .qbtn:active{transform:translateY(1px)}
    .qty span{min-width:18px; text-align:center; font-weight:900}
    .rm{
      border:none;
      background:transparent;
      color:rgba(248,113,113,.92);
      font-weight:900;
      cursor:pointer;
    }

    .totals{
      display:flex; justify-content:space-between; align-items:center;
      font-weight:900;
      padding:12px;
      border:1px solid var(--stroke);
      border-radius:18px;
      background:rgba(255,255,255,.05);
    }
    html[data-theme="light"] .totals{background:rgba(2,6,23,.03)}
    .totals .value{color:var(--good)}
    .noteSmall{color:var(--muted2); font-size:.88rem; line-height:1.55; margin:0}

    footer{
      margin-top: 22px;
      padding: 18px 0 6px;
      color:var(--muted2);
      border-top:1px solid var(--stroke);
    }
    .foot{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      font-size:.88rem;
    }
    .heart{color:#fb7185}

    /* Payment modal */
    .payGrid{
      display:grid;
      gap:12px;
    }
    .payTabs{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }
    .chip{
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      user-select:none;
    }
    .chip.active{
      background:linear-gradient(90deg, rgba(124,58,237,.55), rgba(34,211,238,.40));
      border-color: rgba(232,238,255,.25);
    }
    .qrisBox{
      border:1px solid var(--stroke);
      border-radius:20px;
      background:rgba(255,255,255,.05);
      padding:12px;
      display:grid;
      gap:10px;
      justify-items:center;
    }
    .qrisImg{
      width:min(360px, 100%);
      height:auto;
      border-radius:18px;
      border:1px solid var(--stroke2);
      background:rgba(0,0,0,.25);
    }
    .copyRow{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }
    .copyBtn{
      border:1px solid var(--stroke2);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
    }
    .warnText{ color: var(--warn); font-weight:900; }
    .badText{ color: var(--bad); font-weight:900; }
  </style>
</head>

<body>
  <div class="bg-grid"></div>

  <header>
    <div class="container">
      <div class="nav">
        <div class="brand">
          <img src="retail-cortex-logo.png" alt="Retail-Cortex.io" onerror="this.style.display='none'">
          <div class="brand-text">
            <div class="brand-title">RETAIL-CORTEX.IO</div>
            <div class="brand-sub">SERVICE MODULES</div>
          </div>
        </div>
        <button class="menuBtn" id="menuBtn" aria-label="Menu">
          <svg viewBox="0 0 24 24" fill="none" width="22" height="22">
            <path d="M4 7h16M4 12h16M4 17h16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="container">
        <div class="pill">
          <span class="dot"></span>
          <span>Portal layanan operasional toko — cepat, rapi, dan terukur.</span>
        </div>

        <div class="heroGrid">
          <div>
            <h1 class="heroTitle">
              <span class="accent">Retail-Cortex.io</span><br>
              Layanan untuk Eksekusi Toko.
            </h1>
            <p class="heroDesc">
              Retail-Cortex.io membantu tim toko menyelesaikan kebutuhan operasional seperti penambahan member,
              pembaruan area coverage, coaching PPS/Suegeerr, hingga penyusunan presentasi kerja yang rapi untuk
              evaluasi maupun pengajuan jabatan.
            </p>

            <div class="heroCards" style="margin-top:12px;">
              <div class="miniCard">
                <h4>Alur Order</h4>
                <p>Pilih modul → isi seperlunya → masuk keranjang → checkout → pilih pembayaran (QRIS/TF) → kirim konfirmasi via WhatsApp.</p>
              </div>
              <div class="miniCard">
                <h4>Status</h4>
                <p>Mode: <b id="modeLabel">DARK</b> • Sistem: <b>READY</b> • Checkout: <b>WA</b></p>
              </div>
            </div>
          </div>

          <div class="brandMark">
            <div class="logoWrap">
              <img src="retail-cortex-logo.png" alt="Retail-Cortex.io" onerror="this.style.display='none'">
            </div>
            <div class="cap">BRAND MARK</div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>Cortex Service Modules</h2>
        <p class="sub">Klik modul, isi seperlunya, lalu checkout. Harga tampil saat checkout sesuai modul.</p>

        <div class="grid" id="moduleGrid">

          <!-- MEMBERSHIP -->
          <article class="card">
            <div class="cardTop">
              <div class="badge">MEMBERSHIP</div>
              <div class="iconBox" aria-hidden="true">
                <!-- user-plus -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8Z" stroke="currentColor" stroke-width="2"/>
                  <path d="M19 8v6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M22 11h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
            <div class="cardBody">
              <div class="cardTitle">New Member Fresh</div>
              <p class="cardDesc">Tambah member baru, tanpa harus pusing mencari member baru.</p>

              <button class="btn btnPrimary btnFull" data-open="member">
                <svg viewBox="0 0 24 24" fill="none" width="18" height="18">
                  <path d="M7 7h10M7 12h10M7 17h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span>DETAIL &amp; INPUT</span>
              </button>

              <div class="hintLine">Harga akan dihitung otomatis saat checkout.</div>
            </div>
          </article>

          <!-- AREA COVERAGE -->
          <article class="card">
            <div class="cardTop">
              <div class="badge">DESIGN</div>
              <div class="iconBox" aria-hidden="true">
                <!-- map-pin -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 21s6-5 6-10a6 6 0 1 0-12 0c0 5 6 10 6 10Z" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 11.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"/>
                </svg>
              </div>
            </div>
            <div class="cardBody">
              <div class="cardTitle">Design Area Coverage</div>
              <p class="cardDesc">Update Area Coverage terbaru, detail mapping sesuai radius toko.</p>

              <button class="btn btnPrimary btnFull" data-open="area">
                <svg viewBox="0 0 24 24" fill="none" width="18" height="18">
                  <path d="M12 21s6-5 6-10a6 6 0 1 0-12 0c0 5 6 10 6 10Z" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 11.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>DETAIL &amp; INPUT</span>
              </button>

              <div class="hintLine"><b>1× revisi gratis</b> dalam <b>24 jam</b> setelah file dikirim.</div>
            </div>
          </article>

          <!-- PPS COACHING -->
          <article class="card">
            <div class="cardTop">
              <div class="badge">COACHING</div>
              <div class="iconBox" aria-hidden="true">
                <!-- video -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M15 10l5-3v10l-5-3v-4Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                  <path d="M3 7h10a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="2"/>
                </svg>
              </div>
            </div>
            <div class="cardBody">
              <div class="cardTitle">PPS Coaching (GMeet)</div>
              <p class="cardDesc">Coaching via Google Meet sampai paham alur penawaran & eksekusi.</p>

              <button class="btn btnGhost btnFull" data-add-simple="PPS COACHING (GMEET)">
                <svg viewBox="0 0 24 24" fill="none" width="18" height="18">
                  <path d="M6 6h15l-1.5 9h-12Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                  <path d="M6 6 5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>TAMBAH KE KERANJANG</span>
              </button>

              <div class="hintLine">Harga tampil saat checkout.</div>
            </div>
          </article>

          <!-- SUEGEERR -->
          <article class="card">
            <div class="cardTop">
              <div class="badge">COACHING</div>
              <div class="iconBox" aria-hidden="true">
                <!-- target -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M12 22a10 10 0 1 1 10-10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 18a6 6 0 1 1 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 14a2 2 0 1 1 2-2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M22 2l-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
            <div class="cardBody">
              <div class="cardTitle">Suegeerr Support</div>
              <p class="cardDesc">Pendampingan eksekusi & monitoring sampai paham alur penawaran.</p>

              <button class="btn btnGhost btnFull" data-add-simple="SUEGEERR SUPPORT">
                <svg viewBox="0 0 24 24" fill="none" width="18" height="18">
                  <path d="M6 6h15l-1.5 9h-12Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                  <path d="M6 6 5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>TAMBAH KE KERANJANG</span>
              </button>

              <div class="hintLine">Harga tampil saat checkout.</div>
            </div>
          </article>

          <!-- PRESENTASI KARIER -->
          <article class="card">
            <div class="cardTop">
              <div class="badge">PRESENTASI</div>
              <div class="iconBox" aria-hidden="true">
                <!-- presentation -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M4 4h16v12H4z" stroke="currentColor" stroke-width="2"/>
                  <path d="M8 20h8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M12 16v4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M7 8h10M7 11h6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
              </div>
            </div>
            <div class="cardBody">
              <div class="cardTitle">Presentasi Karier (PPT)</div>
              <p class="cardDesc">Presentasi rapi untuk review kenaikan jabatan & kebutuhan LPJ. Harga: konsultasi (beda kebutuhan).</p>

              <button class="btn btnGhost btnFull" data-add-simple="PRESENTASI KARIER (PPT)">
                <svg viewBox="0 0 24 24" fill="none" width="18" height="18">
                  <path d="M6 6h15l-1.5 9h-12Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                  <path d="M6 6 5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                  <path d="M9 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" stroke="currentColor" stroke-width="2"/>
                </svg>
                <span>TAMBAH KE KERANJANG</span>
              </button>

              <div class="hintLine">Harga tidak ditampilkan (langsung konsultasi via WA).</div>
            </div>
          </article>

        </div>
      </div>
    </section>

    <section class="section">
      <div class="container">
        <h2>Ulasan Singkat</h2>
        <p class="sub">Ringkasan pengalaman beberapa pengguna. Nama disamarkan.</p>

        <div class="testiWrap">
          <div class="testi">
            <div class="stars">★★★★★</div>
            <p>“Mantap gausah cari member lg tinggal order, murahh josss.”</p>
            <div class="name">R***</div>
            <div class="meta">Operational Support</div>
          </div>
          <div class="testi">
            <div class="stars">★★★★★</div>
            <p>“Design Area coverage nya keren mantull cocok.”</p>
            <div class="name">A***</div>
            <div class="meta">Store Team</div>
          </div>
          <div class="testi">
            <div class="stars">★★★★☆</div>
            <p>“PPT untuk evaluasi karier lebih rapi dan mudah dipresentasikan.”</p>
            <div class="name">N***</div>
            <div class="meta">Supervisor</div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="container">
        <div class="foot">
          <div>© <span id="y"></span> Retail-Cortex.io</div>
          <div>Crafted with <span class="heart">❤</span> • D&amp;D A Digital Creative Studio</div>
        </div>
      </div>
    </footer>
  </main>

  <!-- Floating: Theme -->
  <button class="floating floatingLeft" id="themeBtn" aria-label="Toggle Theme" title="Toggle Theme">
    <svg id="themeIcon" viewBox="0 0 24 24" fill="none" width="22" height="22">
      <path d="M21 13a8 8 0 1 1-10-10 6.5 6.5 0 0 0 10 10Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
    </svg>
  </button>

  <!-- Floating: Cart -->
  <button class="floating floatingRight" id="cartBtn" aria-label="Keranjang" title="Keranjang">
    <span class="count" id="cartCount">0</span>
    <svg viewBox="0 0 24 24" fill="none" width="22" height="22">
      <path d="M6 6h15l-1.5 9h-12Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
      <path d="M6 6 5 3H2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M9 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2ZM18 20a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z" stroke="currentColor" stroke-width="2"/>
    </svg>
  </button>

  <!-- ===== Member Modal ===== -->
  <div class="overlay" id="memberOverlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHeader">
        <h3>NEW MEMBER FRESH</h3>
        <button class="closeBtn" data-close="member" aria-label="Tutup">
          <svg viewBox="0 0 24 24" fill="none" width="20" height="20">
            <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modalBody">
        <p class="help" style="margin-top:0">
          Isi jumlah member, sistem menghitung total otomatis. Format WA akan otomatis kapital & rapih.
        </p>

        <div class="field">
          <div class="label">JUMLAH QTY MEMBER</div>
          <input type="number" id="m_qty" min="1" step="1" placeholder="CONTOH: 12">
        </div>

        <div class="inline2">
          <div class="field">
            <div class="label">KODE TOKO</div>
            <input type="text" id="m_kodetoko" placeholder="CONTOH: 2G44">
          </div>
          <div class="field">
            <div class="label">PIN / TGL LAHIR</div>
            <input type="text" id="m_pin" placeholder="CONTOH: 101091">
          </div>
        </div>

        <div class="field">
          <div class="label">PREVIEW (FORMAT WA)</div>
          <textarea id="m_preview" readonly></textarea>
          <p class="help">Harga: Rp5.000/member (di bawah 10). Jika 10 atau lebih: Rp4.500/member.</p>
        </div>
      </div>

      <div class="modalFooter">
        <button class="btn btnGhost" data-close="member">TUTUP</button>
        <button class="btn btnPrimary" id="m_addCart">TAMBAH KE KERANJANG</button>
      </div>
    </div>
  </div>

  <!-- ===== Area Modal ===== -->
  <div class="overlay" id="areaOverlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHeader">
        <h3>DESIGN AREA COVERAGE</h3>
        <!-- FIX: tombol X ada -->
        <button class="closeBtn" data-close="area" aria-label="Tutup">
          <svg viewBox="0 0 24 24" fill="none" width="20" height="20">
            <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modalBody">
        <p class="help" style="margin-top:0">
          Isi data singkat untuk brief. <b>1× revisi gratis</b> dalam <b>24 jam</b> setelah file dikirim.
        </p>

        <div class="inline2">
          <div class="field">
            <div class="label">NAMA TOKO</div>
            <input type="text" id="a_namatoko" placeholder="CONTOH: ALFAMART KP GARUNG TAMBAK">
          </div>
          <div class="field">
            <div class="label">KODE TOKO</div>
            <input type="text" id="a_kodetoko" placeholder="CONTOH: 2G44">
          </div>
        </div>

        <div class="inline2">
          <div class="field">
            <div class="label">BERAPA SUB</div>
            <input type="text" id="a_sub" placeholder="CONTOH: 5 SUB">
          </div>
          <div class="field">
            <div class="label">FORMAT</div>
            <select id="a_format">
              <option value="">PILIH FORMAT</option>
              <option value="LANDSCAPE">LANDSCAPE</option>
              <option value="PORTRAIT">PORTRAIT</option>
            </select>
          </div>
        </div>

        <div class="field">
          <div class="label">SHARELOK TOKO</div>
          <input type="text" id="a_sharelok" placeholder="TEMPEL LINK SHARE LOCATION GOOGLE MAPS">
        </div>

        <div class="miniCard" style="margin-top:10px;">
          <h4 style="margin:0 0 8px;">LIHAT CONTOH PDF</h4>
          <div class="pdfRow">
            <button class="btn btnGhost" id="btnPdfLandscape" type="button">CONTOH LANDSCAPE</button>
            <button class="btn btnGhost" id="btnPdfPortrait" type="button">CONTOH PORTRAIT</button>
          </div>
        </div>
      </div>

      <div class="modalFooter">
        <button class="btn btnGhost" data-close="area">TUTUP</button>
        <button class="btn btnPrimary" id="a_addCart">TAMBAH KE KERANJANG</button>
      </div>
    </div>
  </div>

  <!-- ===== Cart Drawer ===== -->
  <div class="drawerOverlay" id="drawerOverlay" aria-hidden="true">
    <div class="drawer" role="dialog" aria-modal="true">
      <div class="drawerHeader">
        <h3>KERANJANG</h3>
        <button class="closeBtn" id="closeCart" aria-label="Tutup">
          <svg viewBox="0 0 24 24" fill="none" width="20" height="20">
            <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="drawerBody" id="cartItems"></div>

      <div class="drawerFooter">
        <div class="totals">
          <span>TOTAL</span>
          <span class="value" id="cartTotal">Rp0</span>
        </div>
        <p class="noteSmall" id="cartNote" style="display:none;"></p>

        <button class="btn btnGhost" id="clearCart">HAPUS KERANJANG</button>
        <button class="btn btnPrimary" id="checkoutWA">CHECKOUT</button>
      </div>
    </div>
  </div>

  <!-- ===== Payment Modal ===== -->
  <div class="overlay" id="payOverlay" role="dialog" aria-modal="true">
    <div class="modal">
      <div class="modalHeader">
        <h3>PEMBAYARAN</h3>
        <button class="closeBtn" id="payClose" aria-label="Tutup">
          <svg viewBox="0 0 24 24" fill="none" width="20" height="20">
            <path d="M6 6l12 12M18 6 6 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>

      <div class="modalBody">
        <div class="payGrid">
          <div class="totals">
            <span>TOTAL TAGIHAN</span>
            <span class="value" id="payTotal">Rp0</span>
          </div>

          <div class="help" id="payHelp" style="margin-top:-4px;">
            Pilih metode pembayaran. Setelah bayar, klik <b>KIRIM KONFIRMASI KE WA</b> untuk mengirim order + metode bayar.
          </div>

          <div class="payTabs">
            <button class="chip active" id="tabQris" type="button">QRIS</button>
            <button class="chip" id="tabTf" type="button">TRANSFER</button>
          </div>

          <!-- QRIS -->
          <div id="paneQris" class="qrisBox">
            <img id="qrisImg" class="qrisImg" alt="QRIS" />
            <div class="help">Scan QRIS di atas. Jika gambar tidak muncul, pastikan file <b>qris.png</b> ada di repo (root).</div>
          </div>

          <!-- TRANSFER -->
          <div id="paneTf" style="display:none;">
            <div class="field" style="margin-bottom:8px;">
              <div class="label">PILIH JENIS</div>
              <select id="tfGroup">
                <option value="ATM">ATM / BANK</option>
                <option value="EWALLET">EWALLET</option>
              </select>
            </div>

            <div class="field" style="margin-bottom:8px;">
              <div class="label">PILIH TUJUAN</div>
              <select id="tfTarget"></select>
              <div class="help">A/N: <b>BRANDO</b></div>
            </div>

            <div class="copyRow">
              <button class="copyBtn" id="copyTf" type="button">COPY NOMOR</button>
              <span class="help" id="copyStatus" style="margin:0;"></span>
            </div>

            <div class="help" id="tfNote" style="margin-top:10px;">
              Catatan: <span class="badText">DANA WAJIB +100P</span> (sesuai instruksi).
            </div>
          </div>

          <div class="help" style="border-top:1px solid var(--stroke); padding-top:12px;">
            <b>IMPORTANT</b> — Setelah bayar, kirim bukti via WhatsApp agar diproses lebih cepat.
          </div>
        </div>
      </div>

      <div class="modalFooter">
        <button class="btn btnGhost" id="payBack" type="button">KEMBALI</button>
        <button class="btn btnPrimary" id="sendWA" type="button">KIRIM KONFIRMASI KE WA</button>
      </div>
    </div>
  </div>

  <script>
    // ====== CONFIG ======
    const PDF_LANDSCAPE = "area-coverage-landscape.pdf";
    const PDF_PORTRAIT  = "area-coverage-portrait.pdf";

    const WA_NUMBER = "6287809236556";

    // Payment assets (upload file ini ke repo root)
    const QRIS_IMG = "qris.png";

    // Fixed prices (kunci)
    const PRICE_AREA = 45000;
    const PRICE_PPS  = 100000;
    const PRICE_SUEG = 100000;

    const TF_DATA = {
      ATM: [
        { label:"ALADIN", value:"50418072326", note:"A/N BRANDO" },
        { label:"BCA", value:"5505059198", note:"A/N BRANDO" },
        { label:"SEABANK", value:"901245439994", note:"A/N BRANDO" },
        { label:"SUPERBANK", value:"000075561431", note:"A/N BRANDO" }
      ],
      EWALLET: [
        { label:"SHOPEE", value:"081717872185", note:"(BRANDO26)" },
        { label:"DANA", value:"085182197994", note:"WAJIB +100P" },
        { label:"GOPAY", value:"081717872185", note:"(BRANDO)" },
        { label:"OVO", value:"081717872185", note:"(BRANDO)" }
      ]
    };

    // ====== HELPERS ======
    const money = (n) => "Rp" + (Number(n || 0)).toLocaleString("id-ID");
    const moneyDot = (n) => "RP. " + (Number(n || 0)).toLocaleString("id-ID"); // untuk format WA
    const clampInt = (v, min=1) => {
      const x = parseInt(v, 10);
      if (Number.isNaN(x)) return min;
      return Math.max(min, x);
    };
    function siteUrl(path){
      const base = window.location.origin.replace(/\/$/, "");
      return base + "/" + String(path || "").replace(/^\//, "");
    }

    // ====== THEME ======
    const themeBtn = document.getElementById("themeBtn");
    const modeLabel = document.getElementById("modeLabel");
    function setMode(mode){
      document.documentElement.setAttribute("data-theme", mode);
      localStorage.setItem("rc_theme", mode);
      modeLabel.textContent = (mode === "light" ? "LIGHT" : "DARK");
    }
    (function initTheme(){
      const saved = localStorage.getItem("rc_theme") || "dark";
      setMode(saved);
      themeBtn.addEventListener("click", () => {
        const cur = document.documentElement.getAttribute("data-theme");
        setMode(cur === "dark" ? "light" : "dark");
      });
    })();

    // ====== FOOTER YEAR ======
    document.getElementById("y").textContent = new Date().getFullYear();

    // ====== MODALS ======
    const memberOverlay = document.getElementById("memberOverlay");
    const areaOverlay   = document.getElementById("areaOverlay");
    function openOverlay(which){
      if(which === "member") memberOverlay.classList.add("open");
      if(which === "area")   areaOverlay.classList.add("open");
    }
    function closeOverlay(which){
      if(which === "member") memberOverlay.classList.remove("open");
      if(which === "area")   areaOverlay.classList.remove("open");
    }
    document.addEventListener("click", (e) => {
      const open = e.target.closest("[data-open]");
      if(open){
        const id = open.getAttribute("data-open");
        openOverlay(id);
      }
      const close = e.target.closest("[data-close]");
      if(close){
        const id = close.getAttribute("data-close");
        closeOverlay(id);
      }
    });
    [memberOverlay, areaOverlay].forEach(ov => {
      ov.addEventListener("click", (e) => { if(e.target === ov) ov.classList.remove("open"); });
    });

    // ====== PDF BUTTONS ======
    document.getElementById("btnPdfLandscape").addEventListener("click", () => window.open(siteUrl(PDF_LANDSCAPE), "_blank"));
    document.getElementById("btnPdfPortrait").addEventListener("click", () => window.open(siteUrl(PDF_PORTRAIT), "_blank"));

    // ====== CART ======
    const CART_KEY = "rc_cart_v2";
    const cartBtn = document.getElementById("cartBtn");
    const drawerOverlay = document.getElementById("drawerOverlay");
    const closeCart = document.getElementById("closeCart");
    const clearCart = document.getElementById("clearCart");
    const checkoutWA = document.getElementById("checkoutWA");
    const cartItems = document.getElementById("cartItems");
    const cartTotal = document.getElementById("cartTotal");
    const cartCount = document.getElementById("cartCount");
    const cartNote = document.getElementById("cartNote");

    function getCart(){
      try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
      catch { return []; }
    }
    function setCart(items){
      localStorage.setItem(CART_KEY, JSON.stringify(items));
      renderCart();
    }
    function cartQtySum(items){
      return items.reduce((a,b)=>a+(Number(b.qty)||1),0);
    }
    function addItem(item){
      const cart = getCart();
      const sig = item.sig || item.title;
      const found = cart.find(x => x.sig === sig);
      if(found){
        found.qty = (Number(found.qty)||1) + (Number(item.qty)||1);
      }else{
        cart.push(item);
      }
      setCart(cart);
      openCart();
    }
    function removeItem(sig){ setCart(getCart().filter(x => x.sig !== sig)); }
    function changeQty(sig, delta){
      const cart = getCart();
      const it = cart.find(x => x.sig === sig);
      if(!it) return;
      it.qty = Math.max(1, (Number(it.qty)||1) + delta);
      setCart(cart);
    }
    function openCart(){
      drawerOverlay.classList.add("open");
      drawerOverlay.setAttribute("aria-hidden","false");
    }
    function closeCartFn(){
      drawerOverlay.classList.remove("open");
      drawerOverlay.setAttribute("aria-hidden","true");
    }
    cartBtn.addEventListener("click", openCart);
    closeCart.addEventListener("click", closeCartFn);
    drawerOverlay.addEventListener("click", (e) => { if(e.target === drawerOverlay) closeCartFn(); });
    clearCart.addEventListener("click", () => setCart([]));

    function renderCart(){
      const cart = getCart();
      cartCount.textContent = cartQtySum(cart);

      if(cart.length === 0){
        cartItems.innerHTML = `<p class="help" style="margin:0">Keranjang masih kosong.</p>`;
        cartTotal.textContent = money(0);
        cartNote.style.display = "none";
        return;
      }

      let total = 0;
      let hasUnknown = false;

      cartItems.innerHTML = cart.map(it => {
        const price = Number(it.price);
        const known = Number.isFinite(price) && price > 0;
        if(known){
          total += price * (Number(it.qty)||1);
        }else{
          hasUnknown = true;
        }

        return `
          <div class="item">
            <div>
              <div class="t">${it.title}</div>
              <div class="m">
                ${it.meta ? it.meta : ""}
                <div style="margin-top:6px;font-weight:900;color:${known ? "var(--good)" : "var(--warn)"}">
                  ${known ? money(price) : "Harga: konsultasi admin"}
                </div>
              </div>
            </div>
            <div class="right">
              <div class="qty">
                <button class="qbtn" data-q="-1" data-sig="${encodeURIComponent(it.sig)}">-</button>
                <span>${it.qty}</span>
                <button class="qbtn" data-q="1" data-sig="${encodeURIComponent(it.sig)}">+</button>
              </div>
              <button class="rm" data-rm="${encodeURIComponent(it.sig)}">Hapus</button>
            </div>
          </div>
        `;
      }).join("");

      cartTotal.textContent = money(total);

      if(hasUnknown){
        cartNote.style.display = "block";
        cartNote.textContent = "Catatan: item konsultasi akan dikonfirmasi admin via WhatsApp.";
      }else{
        cartNote.style.display = "none";
      }
    }

    cartItems.addEventListener("click", (e) => {
      const qbtn = e.target.closest("[data-q]");
      if(qbtn){
        const sig = decodeURIComponent(qbtn.getAttribute("data-sig"));
        const d = Number(qbtn.getAttribute("data-q"));
        changeQty(sig, d);
        return;
      }
      const rm = e.target.closest("[data-rm]");
      if(rm){
        const sig = decodeURIComponent(rm.getAttribute("data-rm"));
        removeItem(sig);
      }
    });

    // ====== SIMPLE ADD (fixed pricing rules) ======
    document.addEventListener("click", (e) => {
      const b = e.target.closest("[data-add-simple]");
      if(!b) return;
      const title = (b.getAttribute("data-add-simple") || "").toUpperCase();

      let price = 0;
      let meta = "Detail akan diinformasikan melalui WhatsApp.";

      if(title.includes("PPS COACHING")){
        price = PRICE_PPS;
        meta = "COACHING GMEET • SAMPAI PAHAM ALUR PENAWARAN.";
      } else if(title.includes("SUEGEERR")){
        price = PRICE_SUEG;
        meta = "SUPPORT • SAMPAI PAHAM ALUR PENAWARAN.";
      } else if(title.includes("PRESENTASI")){
        price = 0; // konsul
        meta = "HARGA: KONSULTASI (BERGANTUNG KEBUTUHAN).";
      }

      addItem({
        type: "simple",
        title,
        qty: 1,
        price,
        meta,
        sig: "simple::" + title
      });
    });

    // ====== MEMBER LOGIC (auto price) ======
    const m_qty = document.getElementById("m_qty");
    const m_kodetoko = document.getElementById("m_kodetoko");
    const m_pin = document.getElementById("m_pin");
    const m_preview = document.getElementById("m_preview");
    const m_addCart = document.getElementById("m_addCart");

    function memberPricePer(qty){ return (qty >= 10) ? 4500 : 5000; }

    function renderMemberPreview(){
      const qty = clampInt(m_qty.value || 0, 1);
      const per = memberPricePer(qty);
      const total = per * qty;

      const kode = (m_kodetoko.value || "").trim().toUpperCase();
      const pin  = (m_pin.value || "").trim();

      m_preview.value =
`#AKTIVASI#${kode || "-"}
PIN / TGL LAHIR : ${pin || "-"}
JUMLAH QTY MEMBER : ${qty}

TOTAL ${moneyDot(total)}`;
    }

    [m_qty, m_kodetoko, m_pin].forEach(el => el.addEventListener("input", renderMemberPreview));
    renderMemberPreview();

    m_addCart.addEventListener("click", () => {
      const qty = clampInt(m_qty.value || 0, 1);
      const per = memberPricePer(qty);
      const total = per * qty;

      const kode = (m_kodetoko.value || "").trim().toUpperCase();
      const pin  = (m_pin.value || "").trim();

      const meta =
`KODE TOKO: ${kode || "-"}
PIN/TGL LAHIR: ${pin || "-"}
JUMLAH QTY MEMBER: ${qty}`;

      addItem({
        type:"member",
        title:"NEW MEMBER FRESH",
        qty: 1,
        price: total,
        meta: meta.replace(/\n/g,"<br>"),
        sig: "member::" + qty + "::" + (kode||"-") + "::" + (pin||"-"),
        payload: {
          qtyMember: qty,
          pricePer: per,
          total,
          kodeToko: kode || "",
          pin: pin || ""
        }
      });

      closeOverlay("member");
    });

    // ====== AREA (fixed price 45k + revisi) ======
    const a_namatoko = document.getElementById("a_namatoko");
    const a_kodetoko = document.getElementById("a_kodetoko");
    const a_sub = document.getElementById("a_sub");
    const a_sharelok = document.getElementById("a_sharelok");
    const a_format = document.getElementById("a_format");
    const a_addCart = document.getElementById("a_addCart");

    a_addCart.addEventListener("click", () => {
      const nama = (a_namatoko.value || "").trim();
      const kode = (a_kodetoko.value || "").trim().toUpperCase();
      const sub  = (a_sub.value || "").trim();
      const link = (a_sharelok.value || "").trim();
      const fmt  = (a_format.value || "").trim();

      if(!fmt){
        alert("Silakan pilih format (LANDSCAPE/PORTRAIT).");
        return;
      }

      const meta =
`NAMA TOKO: ${nama || "-"}
KODE TOKO: ${kode || "-"}
BERAPA SUB: ${sub || "-"}
SHARELOK: ${link || "-"}
FORMAT: ${fmt}
REVISI: 1× GRATIS (24 JAM)`;

      addItem({
        type:"area",
        title:"DESIGN AREA COVERAGE",
        qty: 1,
        price: PRICE_AREA,
        meta: meta.replace(/\n/g,"<br>"),
        sig: "area::" + (kode||"-") + "::" + (fmt||"-") + "::" + (nama||"-"),
        payload: {
          namaToko: nama || "",
          kodeToko: kode || "",
          sub: sub || "",
          sharelok: link || "",
          format: fmt || ""
        }
      });

      closeOverlay("area");
    });

    // ====== Payment Modal logic ======
    const payOverlay = document.getElementById("payOverlay");
    const payClose = document.getElementById("payClose");
    const payBack = document.getElementById("payBack");
    const payTotal = document.getElementById("payTotal");
    const sendWA = document.getElementById("sendWA");

    const tabQris = document.getElementById("tabQris");
    const tabTf   = document.getElementById("tabTf");
    const paneQris = document.getElementById("paneQris");
    const paneTf   = document.getElementById("paneTf");
    const qrisImg  = document.getElementById("qrisImg");

    const tfGroup  = document.getElementById("tfGroup");
    const tfTarget = document.getElementById("tfTarget");
    const copyTf   = document.getElementById("copyTf");
    const copyStatus = document.getElementById("copyStatus");
    const tfNote   = document.getElementById("tfNote");

    let payMethod = "QRIS"; // default
    let tfSelected = null;

    function openPayModal(total){
      payTotal.textContent = money(total);
      qrisImg.src = siteUrl(QRIS_IMG);
      payOverlay.classList.add("open");
      // default QRIS
      setPayTab("QRIS");
      loadTfTargets();
    }
    function closePayModal(){
      payOverlay.classList.remove("open");
    }

    function setPayTab(method){
      payMethod = method;
      if(method === "QRIS"){
        tabQris.classList.add("active");
        tabTf.classList.remove("active");
        paneQris.style.display = "";
        paneTf.style.display = "none";
      } else {
        tabTf.classList.add("active");
        tabQris.classList.remove("active");
        paneTf.style.display = "";
        paneQris.style.display = "none";
      }
    }

    tabQris.addEventListener("click", ()=>setPayTab("QRIS"));
    tabTf.addEventListener("click", ()=>setPayTab("TRANSFER"));

    payClose.addEventListener("click", closePayModal);
    payBack.addEventListener("click", () => { closePayModal(); openCart(); });

    payOverlay.addEventListener("click", (e) => { if(e.target === payOverlay) closePayModal(); });

    function loadTfTargets(){
      const group = tfGroup.value;
      const list = TF_DATA[group] || [];
      tfTarget.innerHTML = list.map((x, i)=>`<option value="${i}">${x.label} — ${x.value} ${x.note ? " " + x.note : ""}</option>`).join("");
      tfSelected = list[0] || null;
      updateTfNote();
    }
    function updateTfNote(){
      const group = tfGroup.value;
      const idx = parseInt(tfTarget.value || "0", 10);
      const list = TF_DATA[group] || [];
      tfSelected = list[idx] || list[0] || null;

      if(group === "EWALLET" && tfSelected && tfSelected.label === "DANA"){
        tfNote.innerHTML = `Catatan: <span class="badText">DANA WAJIB +100P</span> (sesuai instruksi).`;
      } else {
        tfNote.innerHTML = `Catatan: Pastikan nominal sesuai total tagihan.`;
      }
    }

    tfGroup.addEventListener("change", ()=>{ loadTfTargets(); copyStatus.textContent=""; });
    tfTarget.addEventListener("change", ()=>{ updateTfNote(); copyStatus.textContent=""; });

    copyTf.addEventListener("click", async () => {
      updateTfNote();
      if(!tfSelected) return;
      try{
        await navigator.clipboard.writeText(tfSelected.value);
        copyStatus.textContent = "Tersalin.";
      }catch{
        // fallback
        const ta = document.createElement("textarea");
        ta.value = tfSelected.value;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
        copyStatus.textContent = "Tersalin.";
      }
    });

    // ====== CHECKOUT button now opens Payment Modal ======
    checkoutWA.addEventListener("click", () => {
      const cart = getCart();
      if(cart.length === 0){
        alert("Keranjang masih kosong.");
        return;
      }

      // total all known prices (member/area/pps/sueg) + unknown = 0
      const total = cart.reduce((sum, it) => {
        const price = Number(it.price);
        if(Number.isFinite(price) && price > 0) return sum + (price * (Number(it.qty)||1));
        return sum;
      }, 0);

      closeCartFn();
      openPayModal(total);
    });

    // ====== SEND WA from payment modal ======
    function buildWAText(method, methodDetail){
      const cart = getCart();
      let lines = [];
      lines.push("HALO,");
      lines.push("SAYA INGIN MELAKUKAN CHECKOUT MODUL BERIKUT:");

      cart.forEach((it, idx) => {
        const n = idx + 1;

        if(it.type === "member" && it.payload){
          const p = it.payload;
          const kode = (p.kodeToko || "-").toUpperCase();
          const pin  = (p.pin || "-");

          lines.push("");
          lines.push(`${n}) NEW MEMBER FRESH`);
          lines.push(`#AKTIVASI#${kode}`);
          lines.push(`PIN / TGL LAHIR : ${pin}`);
          lines.push(`JUMLAH QTY MEMBER : ${p.qtyMember}`);
          lines.push(`TOTAL : ${moneyDot(p.total)}`);
          return;
        }

        if(it.type === "area" && it.payload){
          const p = it.payload;
          lines.push("");
          lines.push(`${n}) DESIGN AREA COVERAGE`);
          lines.push(`NAMA TOKO : ${(p.namaToko || "-").toUpperCase()}`);
          lines.push(`KODE TOKO : ${(p.kodeToko || "-").toUpperCase()}`);
          lines.push(`BERAPA SUB : ${(p.sub || "-").toUpperCase()}`);
          lines.push(`SHARELOK : ${p.sharelok || "-"}`);
          lines.push(`FORMAT : ${(p.format || "-").toUpperCase()}`);
          lines.push(`REVISI : 1X GRATIS (24 JAM)`);
          lines.push(`HARGA : ${moneyDot(PRICE_AREA)}`);
          return;
        }

        // simple
        lines.push("");
        lines.push(`${n}) ${it.title}`);
        const price = Number(it.price);
        if(Number.isFinite(price) && price > 0){
          lines.push(`HARGA : ${moneyDot(price)}`);
        } else {
          lines.push("HARGA : KONSULTASI ADMIN");
        }
      });

      const knownTotal = cart.reduce((sum, it) => {
        const price = Number(it.price);
        if(!Number.isFinite(price) || price <= 0) return sum;
        return sum + (price * (Number(it.qty)||1));
      }, 0);

      lines.push("");
      lines.push(`TOTAL TAGIHAN : ${moneyDot(knownTotal)}`);
      lines.push(`METODE PEMBAYARAN : ${method}${methodDetail ? " — " + methodDetail : ""}`);
      lines.push("");
      lines.push("SAYA AKAN KIRIM BUKTI PEMBAYARAN DI CHAT INI.");
      lines.push("TERIMA KASIH.");

      return lines.join("\n");
    }

    sendWA.addEventListener("click", () => {
      const cart = getCart();
      if(cart.length === 0){
        alert("Keranjang masih kosong.");
        closePayModal();
        return;
      }

      let methodDetail = "";
      if(payMethod === "TRANSFER"){
        updateTfNote();
        if(tfSelected){
          methodDetail = `${tfGroup.value} ${tfSelected.label} ${tfSelected.value}`;
          if(tfGroup.value === "EWALLET" && tfSelected.label === "DANA"){
            methodDetail += " (WAJIB +100P)";
          }
        }
      }

      const text = buildWAText(payMethod, methodDetail);
      const url = `https://wa.me/${encodeURIComponent(WA_NUMBER)}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank");
      closePayModal();
    });

    // init cart render
    renderCart();

    // menu button -> open cart
    document.getElementById("menuBtn").addEventListener("click", () => openCart());
  </script>
</body>
</html>
